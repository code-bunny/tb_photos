<%= form_for @photo, :url => (@photo.new_record? ? spud_admin_photos_path : spud_admin_photo_path(@photo)), :html => {:id => 'spud_admin_photo_form', :target => 'spud_admin_photo_form_target', :class => 'form-horizontal'} do |f| %> 
  
  <%=error_messages_for(f.object)%>
  
  <fieldset>
    <legend>Photo Info</legend>  
      <div class="control-group">
        <%= f.label :title, :class => "control-label" %>
        <div class="controls">
          <%= f.text_field :title %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :caption, :class => "control-label" %>
        <div class="controls">
          <%= f.text_field :caption %>
        </div>
      </div>
  </fieldset>

  <fieldset>
    <legend id="fileUploadSizeLegend">File Upload</span></legend>
      <div class="control-group">
        <%= f.label :photo, :class => "control-label" %>
        <div class="controls">
          <%= f.file_field :photo %>
        </div>
      </div>
      <% unless @photo.new_record? %>
        <div class="control-group">
          <label class="control-label">Current Photo</label>
          <div class="controls">
            <%= image_tag @photo.photo.url(:spud_admin_medium) %>
          </div>
        </div>
      <% end %>
  </fieldset>

  <iframe id="spud_admin_photo_form_target" name="spud_admin_photo_form_target" style="display:none;"></iframe>

<% end %>
<script type="text/javascript">
  spud.admin.photos.max_image_upload_size_humanized = spud.admin.photos.getFileSizeHumanized(<%= Spud::Photos.max_image_upload_size %>);
  spud.admin.photos.max_image_upload_size_bytes = <%= Spud::Photos.max_image_upload_size %>;
  $("#fileUploadSizeLegend").html('File Upload <span class="split-pane-item-meta">max allowed size : '+ spud.admin.photos.max_image_upload_size_humanized +'</span>');
</script>